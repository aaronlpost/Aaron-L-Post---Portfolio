var capturing=window.Mobify&&window.Mobify.capturing||!1,polyfillPictureElement=function(e,t,n){"use strict";var r,i=e.localStorage&&"true"===e.localStorage["picturefill-prefHD"],s=!1;e.document.createElement("picture")&&e.document.createElement("source")&&e.HTMLPictureElement&&(s=!0),e.types={},e.picturedetect=function(){return function(){if(!s){var n={svg:"http://www.w3.org/2000/svg"},r=t.createElement("div");r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==n.svg&&(e.types["image/svg+xml"]=!0);var i=new Image;i.onload=function(){1==i.width&&(e.types["image/webp"]=!0)},i.src="data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAUAgCdASoBAAEAL/3+/3+CAB/AAAFzrNsAAP5QAAAAAA=="}}}(),e.picturefill=function(){return function(){if(!s)for(var o=t.getElementsByTagName("picture"),u=0,l=o.length;l>u;u++){var h,p=o[u].getElementsByTagName("source"),v=null,m=[];if(!p.length){var g=o[u].innerHTML,y=t.createElement("div"),w=g.replace(/(<)source([^>]+>)/gim,"$1div$2").match(/<div[^>]+>/gim);y.innerHTML=w.join(""),p=y.getElementsByTagName("div")}for(var E=0,S=p.length;S>E;E++){var x=p[E].getAttribute("media"),T=p[E].getAttribute("type");if(m.length&&T!=h)break;T&&1!=e.types[T]||(!x||e.matchMedia&&e.matchMedia(x).matches)&&m.push(p[E]),h=T}var v=o[u].getElementsByTagName("img")[0];if(n&&(v.setAttribute("data-src",v.getAttribute(n+"src")),v.removeAttribute(n+"src")),m.length){var N=m.pop(),C=N.getAttribute("srcset");if(v||(v=t.createElement("img"),v.alt=o[u].getAttribute("alt"),o[u].appendChild(v)),C){var k=i&&e.devicePixelRatio||1,p=C.split(",");r=e.devicePixelRatio>1;for(var L=p.length,A=L-1;A>=0;A--){var O=p[A].replace(/^\s*/,"").replace(/\s*$/,"").split(" "),M=parseFloat(O[1],10);if(k>=M){if(v.getAttribute("src")!==O[0]){var _=t.createElement("img");_.src=O[0],_.alt=v.alt,_.onload=function(){this.width=this.cloneNode(!0).width/M},v.parentNode.replaceChild(_,v)}break}}}else{var D=N.getAttribute("src");v.src?-1==v.src.indexOf(D)&&(v.src=D):v.src=D}}else v&&o[u].removeChild(v)}}}(),window.capturing?(e.picturedetect(),e.picturefill()):e.addEventListener("resize",e.picturefill,!1)};if(capturing){console.log("Executing main during capturing phase!");Mobify.Capture.init(function(e){var t=e.capturedDoc;polyfillPictureElement(window,t,e.prefix);e.renderCapturedDoc()})}else{console.log("Executing main in post-capturing phase!");polyfillPictureElement(window,document)};